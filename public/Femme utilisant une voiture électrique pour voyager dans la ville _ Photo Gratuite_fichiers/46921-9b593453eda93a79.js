!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7a6caed8-4345-45c7-af06-5ad166c71b12",e._sentryDebugIdIdentifier="sentry-dbid-7a6caed8-4345-45c7-af06-5ad166c71b12")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46921],{1557:function(e,n,t){t.d(n,{U:function(){return r}});let r=(0,t(52983).createContext)({})},46616:function(e,n,t){t.d(n,{u:function(){return C}});var r=t(97458),l=t(52983),a=t(19170),u=t(7616),o=t(10893),c=t(45451);let i=()=>(0,l.useCallback)(e=>{let{collectionId:n,collectionName:t,fileId:r,location:l}=e;(0,c.sendGTMEvent)({collection_id:n,collection_name:t,event_name:"add_to_collection",event:"ga4event",file_id:r,location:l})},[]);var s=t(49504),d=t(63202);let f=async e=>{let{id:n,collectionId:t,resourceType:r}=e;return await (0,d.c)("/api/user/resources/".concat(n,"/collections"),"DELETE",{collectionId:t,resourceType:r})},v=async e=>{let{id:n,collectionId:t,resourceType:r}=e;return await (0,d.c)("/api/user/resources/".concat(n,"/collections"),"POST",{collectionId:t,resourceType:r})};var h=t(48197),p=t(99),g=t(8619);let m=e=>{let{type:n,id:t,location:r}=e,[c,d]=(0,l.useState)([]),[m,y]=(0,l.useState)([]),[w,b]=(0,l.useState)([]),{collections:C}=(0,g.h)(),_=(0,u.b9)((0,h.X)({type:n,id:t})),I=(0,s.g)(),{openToast:k}=(0,a.x_)(),{t:E}=(0,o.$G)("collections"),x=i(),P=(0,l.useMemo)(()=>(null==C?void 0:C.length)>0?C.filter(e=>e.hasResourceInCollection).map(p.V):[],[C]);(0,l.useEffect)(()=>{(null==C?void 0:C.length)>0&&b(P)},[C,P]);let S=c.length>0||m.length>0,D=(0,l.useCallback)(async()=>{if(0===c.length&&0===m.length)return;let e=[];c.length>0&&e.push(v({id:t,collectionId:c.map(e=>e.id),resourceType:n})),m.length>0&&e.push(f({id:t,collectionId:m.map(e=>e.id),resourceType:n}));try{(await Promise.all(e)).every(e=>null==e?void 0:e.success)?(c.forEach(e=>{x({fileId:t,collectionId:e.id,collectionName:e.name,location:r})}),d([]),y([]),k({type:"success",message:E("changesSavedSuccessfully")}),_((null==w?void 0:w.length)===0)):k(),I()}catch(e){k()}},[null==w?void 0:w.length,c,m,t,r,I,x,_,k,E,n]),T=e=>{let{array:n,collection:t}=e;return n.map(e=>e.id).includes(t.id)?n.filter(e=>e.id!==t.id):[...n,t]},G=(0,l.useCallback)(async e=>{b(n=>T({array:n,collection:e}))},[]);return{isDirty:S,collectionsSelected:w,handleCollectionSelection:(0,l.useCallback)(async e=>{G(e),C.some(n=>n.id===e.id&&n.hasResourceInCollection)?y(n=>T({array:n,collection:e})):d(n=>T({array:n,collection:e}))},[C,G]),handleSaveChanges:D}};var y=t(94498);let w=()=>{let{collections:e,nextPage:n}=(0,g.h)(),[t,r]=(0,l.useState)([]),a=(0,u.b9)(y.GD),o=(0,l.useRef)();(0,l.useEffect)(()=>{(null==e?void 0:e.length)>0&&r(e.map(p.V))},[e,n]);let c=null!==n,i=n=>{r((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).map(p.V))},s=async e=>{o.current&&clearTimeout(o.current),o.current=setTimeout(async()=>{a(e)},350)};return{isSearchByApi:c,searchCollections:t,handleSearch:e=>{c?s(e):i(e)}}};var b=t(1557);let C=e=>{let{children:n,id:t,type:a,location:u}=e,{collectionsSelected:o,handleCollectionSelection:c,handleSaveChanges:i,isDirty:s}=m({type:a,id:t,location:u}),{searchCollections:d,isSearchByApi:f,handleSearch:v}=w(),h=(0,l.useMemo)(()=>({collectionsSelected:o,searchCollections:d,isSearchByApi:f,isDirty:s,handleCollectionSelection:c,handleSearch:v,handleSaveChanges:i}),[o,c,i,v,s,f,d]);return(0,r.jsx)(b.U.Provider,{value:h,children:n})}},8619:function(e,n,t){t.d(n,{h:function(){return a}});var r=t(7616),l=t(94498);let a=()=>{let{data:e,meta:{pagination:{nextPage:n}}}=(0,r.Dv)(l.HQ);return{collections:e,nextPage:n}}},99:function(e,n,t){t.d(n,{V:function(){return r}});let r=e=>{var n;return{id:e.id,name:e.name,author:(null===(n=e.author)||void 0===n?void 0:n.name)||void 0,hasResourceInCollection:e.hasResourceInCollection}}},76559:function(e,n,t){t.d(n,{r:function(){return p}});var r=t(27793),l=t(91394),a=t(19170),u=t(7616),o=t(34529),c=t(10893),i=t(52983),s=t(45451);let d=()=>(0,i.useCallback)(e=>{let{location:n,fileId:t}=e;(0,s.sendGTMEvent)({event:"ga4event",event_name:"collect",location:n,file_id:t})},[]);var f=t(49504),v=t(48197),h=t(94498);let p=e=>{let{id:n,type:t,location:s}=e,{t:p}=(0,c.$G)("error"),g=(0,u.Dv)((0,v.X)({id:n,type:t})),m=(0,o.oC)(h.GD),[y,w]=(0,i.useState)(!1),b=(0,l.d)(),{loginUrl:C,setLoginCookies:_}=(0,r.J)(),{openToast:I}=(0,a.x_)(),k=(0,f.g)(),E=d();return{added:g,showModal:y,setShowModal:w,onClick:()=>{if(!b){_(),window.location.href=C;return}k(),w(!0),E({location:s,fileId:n})},handleError:e=>{console.error(e),I({type:"danger",message:p("unknown")}),w(!1)},handleOpenChange:()=>{m(),w(!1)}}}},5301:function(e,n,t){t.d(n,{x:function(){return a}});var r=t(52983);let l=r.useLayoutEffect,a=e=>{let[n,t]=(0,r.useState)(!e),a=(0,r.useRef)(e);l(()=>{a.current!==e&&(a.current=e,t(!0))},[e]);let u=(0,r.useCallback)(()=>t(!1),[]);return(0,r.useMemo)(()=>({isLoading:n,loaded:u}),[n,u])}},55337:function(e,n,t){t.d(n,{y:function(){return r}});let r=(0,t(52983).createContext)({})},67697:function(e,n,t){t.d(n,{g:function(){return f}});var r=t(97458),l=t(53344),a=t.n(l),u=t(52983),o=t(55563),c=t(10038),i=t(55337);let s=a()(()=>Promise.all([t.e(39474),t.e(18970)]).then(t.bind(t,18970)).then(e=>e.ModalReport),{loadableGenerated:{webpack:()=>[18970]}}),d={interactionType:"onload"},f=e=>{let{id:n,type:t,children:l}=e,[a,f]=(0,u.useState)(!1),[v,h]=(0,u.useState)(!1),p=(0,o.X)(),g=(0,c.I)(),m=(0,u.useCallback)(()=>{h(!0),f(!0),p(d)},[p]),y=(0,u.useCallback)(()=>{g(!1),h(!1)},[g]),w=(0,u.useMemo)(()=>({id:n,type:t,handleOpen:m}),[n,t,m]);return(0,r.jsxs)(i.y.Provider,{value:w,children:[l,a&&(0,r.jsx)(s,{isOpen:v,onFinish:y})]})}},55563:function(e,n,t){t.d(n,{X:function(){return a}});var r=t(45451),l=t(52983);let a=()=>(0,l.useCallback)(e=>{(0,r.sendGTMEvent)({event:"ga4event",event_name:"report_content",interaction_type:e.interactionType})},[])},80719:function(e,n,t){t.d(n,{X:function(){return l}});var r=t(63202);let l=e=>{let{page:n,resourceId:t,searchTerm:l,collectionIds:a,ownership:u}=e,o=a?a.join(","):void 0,c={page:"".concat(n),...t&&{resourceId:"".concat(t)},...l&&{"filter[term]":l},...o&&{"filter[ids]":o},...u&&{"filter[ownership]":u}},i="/api/user/collections?".concat(new URLSearchParams(c));return(0,r.c)(i,"GET")}},49504:function(e,n,t){t.d(n,{g:function(){return s},l:function(){return i}});var r=t(78511),l=t(25288),a=t(7616),u=t(52983),o=t(80719),c=t(94498);let i=e=>{let{page:n=1,resourceId:t}=e,l=(0,a.Dv)(c.GD);return(0,r.a)({queryKey:[...d,{page:n,resourceId:t,searchTerm:l}],queryFn:async()=>{let{data:e,success:r}=await (0,o.X)({page:n,resourceId:t,searchTerm:l});if(!r)throw Error(e);return e}})},s=()=>{let e=(0,l.NL)();return(0,u.useCallback)(()=>{e.invalidateQueries({queryKey:d})},[e])},d=["collections","all"]},48197:function(e,n,t){t.d(n,{X:function(){return c}});var r=t(6476),l=t(12297),a=t(24399),u=t(73139);let o=(0,a.cn)([]),c=(0,u.xu)(e=>{let{id:n,type:t}=e;return(0,a.cn)(e=>!!e(r.PQ)&&e(o).some(e=>e.id===n&&e.type===t),(e,r,l)=>{r(o,e=>l?e.filter(e=>e.id!==n):[...e,{id:n,type:t}])})},l.vZ)},94498:function(e,n,t){t.d(n,{GD:function(){return l},HQ:function(){return a},w0:function(){return u}});var r=t(24399);let l=(0,t(73139).rw)(""),a=(0,r.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),u=(0,r.cn)([])},10038:function(e,n,t){t.d(n,{I:function(){return a}});var r=t(7616),l=t(18547);let a=()=>(0,r.b9)(l.$)},83273:function(e,n,t){var r=t(97458);n.Z=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"M486.2 50.2c-9.6-3.8-20.5-1.3-27.5 6.2l-98.2 125.5-83-161.1C273 13.2 264.9 8.5 256 8.5s-17.1 4.7-21.5 12.3l-83 161.1L53.3 56.5c-7-7.5-17.9-10-27.5-6.2C16.3 54 10 63.2 10 73.5v333c0 35.8 29.2 65 65 65h362c35.8 0 65-29.2 65-65v-333c0-10.3-6.3-19.5-15.8-23.3"})})},15847:function(e,n,t){t.d(n,{s:function(){return l},P:function(){return a}});var r=t(1850);let l=Object.values({"16:9":"16:9","9:16":"9:16","256:135":"256:135","135:256":"135:256","1:1":"1:1","4:3":"4:3"}),a=r.z.enum(l)},41937:function(e,n,t){t.d(n,{I:function(){return l}});var r=t(8147);let l=()=>{let e=(0,r.H)();return!e||!!(null==e?void 0:e.profile.isAnonymous)}},18444:function(e,n,t){t.d(n,{w:function(){return l}});var r=t(8147);let l=()=>{let e=(0,r.H)();return!!(null==e?void 0:e.profile.isRegistered)}},65122:function(e,n,t){t.d(n,{e:function(){return l}});var r=t(8147);let l=()=>{let e=(0,r.H)();return!!(null==e?void 0:e.permissions.canDownloadResourcePremium)}},97813:function(e,n,t){t.d(n,{X:function(){return a}});var r=t(15847);let l=t(1850).z.enum(r.s),a=e=>{if(!e)return"horizontal";if(!l.safeParse(e).success)throw Error("Invalid aspect ratio: ".concat(e));let[n,t]=e.split(":").map(Number);return n===t?"square":n<t?"vertical":"horizontal"}}}]);